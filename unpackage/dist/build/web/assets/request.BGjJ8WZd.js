import{g as e,Y as t,Q as r,b as a,R as s,Z as o}from"./index-vclNGZkt.js";const n={config:{baseUrl:"http://47.99.104.91:8039/WebApi/api/",header:{"Content-Type":"application/json;charset=UTF-8"},data:{},method:"POST",dataType:"json",responseType:"text",success(){},fail(){},complete(){}},interceptor:{request:null,response:null},request(n){return n||(n={}),n.baseUrl=n.baseUrl||this.config.baseUrl,n.dataType=n.dataType||this.config.dataType,n.url=n.baseUrl+n.url,n.sslVerify=!1,n.data=n.data||{},n.method=n.method||this.config.method,"json"===n.dataType?n.header={...n.header,"Content-Type":"application/json;charset=UTF-8"}:n.header={...n.header,"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},e("token")?n.header={...n.header,Authorization:"Bearer "+e("token")||""}:n.header={...n.header},new Promise(((e,i)=>{let d=null;n.complete=o=>{let n=o.statusCode;if(o.config=d,this.interceptor.response){let e=this.interceptor.response(o);e&&(o=e)}o.statusCode,200===n?(t("login",{login:!0}),e(o.data)):401===n?(r(),a("token",""),s({url:"/pages/index/index"})):i(o)},d=Object.assign({},this.config,n),d.requestId=(new Date).getTime(),this.interceptor.request&&this.interceptor.request(d),console.log(d),o(d)}))},get(e,t,r){return r||(r={}),r.url=e,r.data=t,r.method="GET",this.request(r)},post(e,t,r){return r||(r={}),r.url=e,r.data=t,r.method="POST",this.request(r)},put(e,t,r){return r||(r={}),r.url=e,r.data=t,r.method="PUT",this.request(r)},delete(e,t,r){return r||(r={}),r.url=e,r.data=t,r.method="DELETE",this.request(r)}};export{n as h};
