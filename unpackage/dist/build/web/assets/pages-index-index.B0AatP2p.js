import{r as e,s as a,g as s,a as o,b as l,c as t,d as u,w as n,i as r,o as i,e as c,n as p,f as d,h as m,j as g}from"./index-vclNGZkt.js";import{_ as f}from"./uni-easyinput.CANxl0sD.js";import{o as h,r as v}from"./uni-app.es.C4xkBdw-.js";import{g as _}from"./storage.D9vc3L4u.js";import{h as b}from"./request.BGjJ8WZd.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.Cl6Lj6n6.js";const y=j({__name:"index",setup(j){const y={placeholderColor:"#999999"},x=e(0),V=e("sybzgo"),k=e(123);h((()=>{const e=_("statusBarHeight");0!=Number(e)&&(x.value=Number(e)),N()}));const N=()=>{V.value&&k.value?s("token")?o({url:"/pages/nav/home"}):b.post("/Auth/accountlogin",{userAccount:V.value,userPassword:k.value}).then((e=>{console.log("登录成功",e),0==e.code?(l("token",e.data.accessToken),l("userFullName",e.data.userFullName),o({url:"/pages/nav/home"})):a({title:e.message,icon:"none"})})).catch((e=>{console.log("登录失败",e)})):a({title:"请输入账号和密码",icon:"none"})};return(e,a)=>{const s=r,o=m,l=v(t("uni-easyinput"),f),h=g;return i(),u(s,{class:"login-container"},{default:n((()=>[c(s,{class:"status_bar",style:p({height:2*x.value+"rpx"})},null,8,["style"]),c(s,{class:"header-section"},{default:n((()=>[c(o,{class:"login-image",src:"/assets/login-CWEvfsqi.png",mode:""})])),_:1}),c(s,{class:"form-container"},{default:n((()=>[c(s,{class:"input-group"},{default:n((()=>[c(l,{border:!1,height:"150px",styles:y,modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),focus:"",placeholder:"请输入您的平台账号"},null,8,["modelValue"])])),_:1}),c(s,{class:"input-group"},{default:n((()=>[c(l,{type:"password",modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value=e),placeholder:"请输入您的密码"},null,8,["modelValue"])])),_:1}),c(h,{class:"login-btn",onClick:N},{default:n((()=>[d(" 登录 ")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-305ab3b8"]]);export{y as default};
