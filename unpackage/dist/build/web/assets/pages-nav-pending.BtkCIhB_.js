import{r as e,m as l,y as a,p as t,z as s,a as o,c as i,w as n,q as u,A as c,B as r,C as d,D as p,i as m,o as f,b as v,n as b,d as h,E as _,G as g,t as w,u as y,F as k,e as x,H as V,f as A,I as C,J as j,x as q,K as N,L as I,k as L,v as H}from"./index-CwTIEDZV.js";import{_ as z}from"./uni-nav-bar.BEjxVRYy.js";import{o as B,r as E}from"./uni-app.es.DzoixSAQ.js";import{_ as F,F as K,a as P}from"./filterPopup.BJ9dnAtc.js";import{_ as Q}from"./search.ByzXnQub.js";import{g as R}from"./storage.D9vc3L4u.js";import{B as O}from"./bottomNavBar.DG2O4kVi.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-icons.LjeySOYq.js";import"./uni-popup.CcSiLlLD.js";import"./h5Bribge.CC0yN2Qd.js";const M=U({__name:"pending",setup(U){const M=e(0);B((()=>{const e=R("statusBarHeight");0!=Number(e)&&(M.value=Number(e))}));const T=e(!0),$=e(null),D=e(""),G=e=>{D.value=e.detail.value,console.log("搜索关键词:",D.value)};e(!1);const J=e([0,1,2]),S=e(0),W=e(["所有","工程类款项","其他类"]),X=e(!1),Y=e(null);function Z(){X.value=!0}function ee(e){console.log("筛选结果",e)}function le(){console.log("重置筛选")}const ae=e([{id:"QA2019091723123100",time:"15分钟前",price:"10,400,500.00",customerName:"张三",applicant:"第一事业部",contactPhone:"13982003346",description:"本期支付中：支付农民工工资专户10000000元，基本户9943492元。",keyInformation:"外环西段交通功能提升工程，土建施工3标段（主线）",isApproval:!0,labelArr:[{label:"标签1",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"}]},{id:"QA2019091723123100",time:"15分钟前",price:"10,400,500.00",customerName:"张三",applicant:"第一事业部",contactPhone:"13982003346",description:"本期支付中：支付农民工工资专户10000000元，基本户9943492元。",keyInformation:"外环西段交通功能提升工程，土建施工3标段（主线）",isApproval:!1,labelArr:[{label:"标签1",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"},{label:"标签2",id:"2313131"}]},{id:"QA20190917212310",time:"15分钟前",price:"10,400,500.00",customerName:"张三",applicant:"第一事业部",contactPhone:"13982003346",description:"本期支付中：支付农民工工资专户10000000元，基本户9943492元。",keyInformation:"外环西段交通功能提升工程，土建施工3标段（主线）",isApproval:!1,labelArr:[{label:"标签1",id:"2313131"},{label:"标签2",id:"2313131"}]},{id:"QA20190917200112312",time:"15分钟前",price:"10,400,500.00",customerName:"张三",applicant:"第一事业部",contactPhone:"13982003346",description:"本期支付中：支付农民工工资专户10000000元，基本户9943492元。",keyInformation:"外环西段交通功能提升工程，土建施工3标段（主线）",isApproval:!1,labelArr:[{label:"标签1",id:"2313131"},{label:"标签2",id:"2313131"}]}]),te=()=>{var e;(null==(e=D.value)?void 0:e.trim())?(V(),se()):x({title:"请输入搜索关键词",icon:"none"})},se=()=>{setTimeout((()=>{$.value.complete(),$.value.reload()}),10)},oe=(e,l)=>{console.log("pageNo--\x3e",e,"pageSize----\x3e",l),$.value.complete(ae.value)},ie=e(""),ne=()=>{try{const{windowHeight:e}=u(),l=c();r().in(null==l?void 0:l.proxy).select(".header-stickt").boundingClientRect((l=>{const a=(null==l?void 0:l.height)||0,t=Math.max(0,e-a);ie.value=`${t}px`})).exec()}catch(e){ie.value="calc(100vh - 100rpx)"}};l((()=>{var e;console.log("订单页面加载完成"),a((()=>ne())),null==(e=t)||e((()=>ne()))}));const ue=e(!1);let ce=null;const re=()=>{T.value=!1,ue.value=!0,console.log("kbOpen",ue.value);try{d({animation:!1})}catch(e){}"undefined"!=typeof document&&document.body.classList.add("kb-open")},de=()=>{T.value=!0,ue.value=!1;try{p({animation:!1})}catch(e){}"undefined"!=typeof document&&document.body.classList.remove("kb-open")};return l((()=>{var e;null==(e=uni.onKeyboardHeightChange)||e.call(uni,(e=>{((null==e?void 0:e.height)||0)>0?re():de()})),"undefined"!=typeof window&&window.visualViewport&&(ce=()=>{const e=window.visualViewport;Math.max(0,window.innerHeight-(e.height+e.offsetTop))>0?re():de()},window.visualViewport.addEventListener("resize",ce),window.visualViewport.addEventListener("scroll",ce))})),s((()=>{var e;null==(e=uni.offKeyboardHeightChange)||e.call(uni),"undefined"!=typeof window&&window.visualViewport&&ce&&(window.visualViewport.removeEventListener("resize",ce),window.visualViewport.removeEventListener("scroll",ce))})),(e,l)=>{const a=m,t=A,s=C,u=E(o("uni-nav-bar"),z),c=H,r=E(o("z-paging"),F);return f(),i(a,{class:"order-page"},{default:n((()=>[v(a,{class:"header-stickt"},{default:n((()=>[v(a,{class:"status_bar",style:b({height:2*M.value+"rpx"})},null,8,["style"]),v(u,{class:"nav-bar-top"},{left:n((()=>[v(a,{class:"nav-bar-title"},{default:n((()=>[h(" 待办流程 ")])),_:1})])),right:n((()=>[v(a,{onClick:Z,class:"nav-bar-filter"},{default:n((()=>[h(" 筛选 ")])),_:1})])),default:n((()=>[v(a,{class:"nav-input-view"},{default:n((()=>[v(t,{class:"input-seach",src:Q,mode:"",onClick:_(te,["stop"])}),v(s,{ref:"searchInput",class:"input-view",placeholder:"搜索",type:"text",modelValue:D.value,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value=e),onInput:G,"confirm-type":"search",onConfirm:te,onKeyup:g(te,["enter"]),onFocus:e.onKbOpen},null,8,["modelValue","onFocus"])])),_:1})])),_:1}),v(a,{class:"segmented-section"},{default:n((()=>[(f(!0),w(k,null,y(W.value,((e,l)=>(f(),i(a,{class:"segmented-section-item",key:l,onClick:e=>(e=>{S.value=e,se();const l=J.value.indexOf(e);-1!==l&&J.value.splice(l,1),console.log("切换到:",W.value[e])})(l)},{default:n((()=>[v(c,{class:"section-item-0",style:{height:"0"}}),v(a,{class:j(["section-item-1",{"section-item-1-active":l===S.value}])},{default:n((()=>[h(q(e)+" ",1),v(c,{class:j({msg:J.value.includes(l)})},null,8,["class"])])),_:2},1032,["class"]),v(c,{class:j(["section-item-0",{"section-item-0-active":l===S.value}])},null,8,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),v(a,{class:"order-list",style:b({height:ie.value})},{default:n((()=>[v(r,{ref_key:"paging",ref:$,modelValue:ae.value,"onUpdate:modelValue":l[1]||(l[1]=e=>ae.value=e),onOnRefresh:se,onQuery:oe,fixed:!1},{default:n((()=>[v(a,{style:{height:"30rpx"}}),(f(!0),w(k,null,y(ae.value,(e=>(f(),i(a,{class:"order-card",key:e.id,onClick:l=>(e=>{L({url:`/pages/detail/index?id=${e.id}&type=pending`})})(e)},{default:n((()=>[N(v(a,{class:"approved-view"},{default:n((()=>[v(t,{src:P,mode:"",style:{width:"100%",height:"100%"}})])),_:2},1536),[[I,null==e?void 0:e.isApproval]]),v(a,{class:"order-header"},{default:n((()=>[v(c,{class:"order-id"},{default:n((()=>[h(q(e.id),1)])),_:2},1024),v(a,{class:"order-time"},{default:n((()=>[v(c,{class:"time-text"},{default:n((()=>[h(q(e.time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),v(a,{class:"order-content"},{default:n((()=>[v(a,{class:"quote-section"},{default:n((()=>[v(c,{class:"quote-label"},{default:n((()=>[h("申请费用：")])),_:1}),v(c,{class:"quote-price"},{default:n((()=>[h("¥"+q(e.price),1)])),_:2},1024)])),_:2},1024),v(a,{class:"quote-section"},{default:n((()=>[v(c,{class:"quote-label"},{default:n((()=>[h("申请单位：")])),_:1}),v(c,{class:"description-text"},{default:n((()=>[h(q(e.applicant)+" | "+q(e.customerName),1)])),_:2},1024)])),_:2},1024),v(a,{class:"quote-section"},{default:n((()=>[v(c,{class:"quote-label"},{default:n((()=>[h("关键信息：")])),_:1}),v(c,{class:"description-text"},{default:n((()=>[h(q(e.keyInformation),1)])),_:2},1024)])),_:2},1024),v(a,{class:"quote-section"},{default:n((()=>[v(c,{class:"quote-label"},{default:n((()=>[h("业务摘要：")])),_:1}),v(c,{class:"description-text"},{default:n((()=>[h(q(e.description),1)])),_:2},1024)])),_:2},1024),v(a,{class:"label-view"},{default:n((()=>[(f(!0),w(k,null,y((null==e?void 0:e.labelArr)||[],((e,l)=>(f(),i(a,{class:"label-item",key:l},{default:n((()=>[v(c,{class:"point-icon"}),v(c,{class:"label-text"},{default:n((()=>[h(q(e.label),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["style"]),v(K,{ref_key:"filterRef",ref:Y,modelValue:X.value,"onUpdate:modelValue":l[2]||(l[2]=e=>X.value=e),confirmCount:1400,onConfirm:ee,onReset:le},null,8,["modelValue"]),v(O,{ref:"bottomNavRef",modelValueFlag:1},null,512)])),_:1})}}},[["__scopeId","data-v-f493ec51"]]);export{M as default};
